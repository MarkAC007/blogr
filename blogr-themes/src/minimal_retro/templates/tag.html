{% extends "base.html" %}

{% block title %}Tag: {{ tag }} - {{ site.blog.title }}{% endblock %}

{% block meta %}
<meta name="description" content="Posts tagged with {{ tag }} on {{ site.blog.title }}">
{% endblock %}

{% block content %}
<div class="tag-page">
    <header class="tag-header">
        <h1 class="tag-title">Posts tagged with <span class="tag-name">#{{ tag }}</span></h1>
        <p class="tag-subtitle">{{ posts | length }} posts found</p>
    </header>

    {% if posts %}
        <div class="tag-posts">
            {% for post in posts %}
            <article class="tag-post">
                <div class="post-date">
                    <time datetime="{{ post.metadata.date }}">
                        {{ post.metadata.date | date(format="%b %d, %Y") }}
                    </time>
                </div>

                <div class="post-content">
                    <h2 class="post-title">
                        <a href="/posts/{{ post.metadata.slug }}.html">{{ post.metadata.title }}</a>
                    </h2>

                    {% if post.metadata.description %}
                    <p class="post-description">{{ post.metadata.description }}</p>
                    {% endif %}

                    <div class="post-meta">
                        {% if post.metadata.author %}
                        <span class="post-author">by {{ post.metadata.author }}</span>
                        {% endif %}

                        {% if post.metadata.status == "draft" %}
                        <span class="draft-badge">Draft</span>
                        {% endif %}
                    </div>

                    {% if post.metadata.tags %}
                    <div class="post-tags">
                        <span class="tags-label">Tags:</span>
                        {% for post_tag in post.metadata.tags %}
                        <a href="/tags/{{ post_tag }}.html" class="tag">#{{ post_tag }}</a>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </article>
            {% endfor %}
        </div>
    {% else %}
        <div class="no-posts">
            <p>No posts found with the tag "{{ tag }}".</p>
            <p class="no-posts-hint">Try browsing <a href="/tags/index.html">all available tags</a> or go back to the <a href="/">homepage</a>.</p>
        </div>
    {% endif %}

    <div class="tag-navigation">
        <a href="/tags/index.html" class="back-tags">← All Tags</a>
        <a href="/archive.html" class="view-archive">View Archive →</a>
    </div>
</div>
{% endblock %}
